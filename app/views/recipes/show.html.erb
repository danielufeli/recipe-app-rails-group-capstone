<%= tag.h1(@recipe.name) %>
<div class="recipe__details">
  <div class="recipe__details-item">
    <%= tag.span('Preparation time:') %>
    <%= tag.p(@recipe.preparation_time) %>
  </div>
  <div class="recipe__details-item">
    <%= tag.span('Cooking time:') %>
    <%= tag.p(@recipe.cooking_time) %>
  </div>
  <div class="recipe__details-item">
    <%= @recipe.description %>
  </div>
  <div class="recipe__details-item">
    <%= tag.span('Public:') %>
    <label class="switch">
    <p><%= @recipe.public %></p>
      <%= check_box_tag 'public_recipe', 'yes', @recipe.public %>
      <span class="slider round"></span>
    </label>
  </div>
</div>
<div class="recipe__buttons">
  <% if can? :destroy, @recipe %>
    <%= link_to 'Generate shopping list', '', class: 'btn' %>
    <%= link_to 'Add ingredient', '', class: 'btn' %>
  <% end %>
</div>
<div class="recipe__ingredients">
  <table>
    <thead>
    <tr>
      <th><%= link_to 'Food', recipe_path(@recipe.id, field: 'name', order: (@f_field == 'name' && @f_order == 'asc' ? 'desc' : 'asc')) %></th>
      <th><%= link_to 'Quantity', recipe_path(@recipe.id, field: 'quantity', order: (@f_field == 'quantity' && @f_order == 'asc' ? 'desc' : 'asc')) %></th>
      <th>Value</th>
      <% if can? :destroy, @recipe %>
      <th>Action</th>
      <% end %>
    </tr>
    </thead>
    <tbody>
      <% @rec_foods.each do |rf| %>
        <tr>
          <td><%= rf.food.name %></td>
          <td><%= rf.quantity %></td>
          <td><%= rf.quantity * rf.food.price %></td>
          <% if can? :destroy, @recipe %>
          <td>
            <%= link_to 'Modify', edit_recipe_food_path(rf.id) %>
            <%= button_to 'Remove', recipe_food_path(rf.id), params: { recipe_food: { rf_id: rf.id }}, method: :delete %>
          </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
